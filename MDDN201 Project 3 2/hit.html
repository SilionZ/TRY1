<!DOCTYPE HTML>

<html>

<head>
  <title>Bingo!Idea</title>
  <link rel="stylesheet" type="text/css" href="css/drag.css">
<script src="js/konvamin.js"></script>
</head>


<header>

<div id="menu">
<div class="menuset">
<ul>
<li><a href="contact.html">Contact </a></li>
<li><a href="info.html">Info</a></li>
<li><a href="portfolio.html">It's Me</a></li>
</div>

</header>

<body>

<div id="img1"><a href="index.html"><img src="img/logo.png" style="width:172px;height:232px;"></a></div>
<div id="img2"><img src="img/WVE.JPG" style="width:880px;height:73px;"></div>

<div id="stage-parent">
<div id="container"></div>
</div>

<script>
        var stageWidth = 10;
        var stageHeight =70;

      var stage = new Konva.Stage({
        container: 'container',
            width: stageWidth,
            height: stageHeight
      });

    var layer = new Konva.Layer();
    stage.add(layer);
    var tempLayer = new Konva.Layer();
    stage.add(tempLayer);
    var text = new Konva.Text({
    });


      //creates and returns a draggable image
      function addDraggableImage(xPos, yPos, width, height){

        var newImage = new Konva.Image({
            x: xPos,
            y: yPos,
            width: width,
            height: height,
            draggable: true
        });

        return newImage;
      }

    var imageObj1 = new Image();
    imageObj1.src = 'img/point.png';
    imageObj1.onload = function() {
    var image1 = addDraggableImage(1300,40, 35, 35);
    image1.image(imageObj1);
    image1.id = 'point';
    layer.add(image1);
    layer.draw();
      };


	var imageObj2 = new Image();
      imageObj2.src = 'img/line.png';
      imageObj2.onload = function() {
          var image2 = addDraggableImage(1280,120, 80, 80);
          image2.image(imageObj2);
          layer.add(image2);
          layer.draw();
          image2.id = 'line';
      };

      var imageObj3 = new Image();
      imageObj3.src = 'img/face.png';
      imageObj3.onload = function() {
          var image3 = addDraggableImage(1280, 220, 80, 80);
          image3.image(imageObj3);
          layer.add(image3);
          layer.draw();
          image3.id = 'face';
      };

      var imageObj6 = new Image();
      imageObj6.src = 'img/echo.png';
      imageObj6.onload = function() {
          var image6 = addDraggableImage(1290,320, 60, 70);
          image6.image(imageObj6);
          layer.add(image6);
          layer.draw();
          image6.id = 'echo';
      };

      var imageObj9 = new Image();
      imageObj9.src = 'img/round.png';
      imageObj9.onload = function() {
          var image9 = addDraggableImage(1290,420, 70, 70);
          image9.image(imageObj9);
          layer.add(image9);
          layer.draw();
          image9.id = 'round';
      };

      var imageObj10 = new Image();
      imageObj10.src = 'img/triangle.png';
      imageObj10.onload = function() {
          var image10 = addDraggableImage(1300,520, 70, 70);
          image10.image(imageObj10);
          layer.add(image10);
          layer.draw();
          image10.id = 'triangle';
      };

      var imageObj16 = new Image();
      imageObj16.src = 'img/diamond.png';
      imageObj16.onload = function() {
          var image16 = addDraggableImage(1300,620, 70, 70);
          image16.image(imageObj16);
          layer.add(image16);
          layer.draw();
          image16.id = 'diamond';
      };

      var imageObj4 = new Image();
      imageObj4.src = 'img/nature.png';

    stage.on("dragstart", function(e){
        e.target.moveTo(tempLayer);
        layer.draw();
    });

      var imageObj5 = new Image();
      imageObj5.src = 'img/deal.png';

    stage.on("dragstart", function(e){
        e.target.moveTo(tempLayer);
        layer.draw();
    });

    var imageObj7 = new Image();
      imageObj7.src = 'img/cloud.png';

    stage.on("dragstart", function(e){
        e.target.moveTo(tempLayer);
        layer.draw();
    });

    var imageObj8 = new Image();
      imageObj8.src = 'img/drama.png';


    stage.on("dragstart", function(e){
        e.target.moveTo(tempLayer);
        layer.draw();
    });

    var imageObj11 = new Image();
      imageObj11.src = 'img/cartoon.png';


    stage.on("dragstart", function(e){
        e.target.moveTo(tempLayer);
        layer.draw();
    });

    var imageObj12 = new Image();
      imageObj12.src = 'img/torto.png';


    stage.on("dragstart", function(e){
        e.target.moveTo(tempLayer);
        layer.draw();
    });

    var imageObj13 = new Image();
      imageObj13.src = 'img/surf.png';


    stage.on("dragstart", function(e){
        e.target.moveTo(tempLayer);
        layer.draw();
    });

    var imageObj14 = new Image();
      imageObj14.src = 'img/swing.png';


    stage.on("dragstart", function(e){
        e.target.moveTo(tempLayer);
        layer.draw();
    });

    var imageObj15 = new Image();
      imageObj15.src = 'img/wave.png';


    stage.on("dragstart", function(e){
        e.target.moveTo(tempLayer);
        layer.draw();
    });

    var imageObj17 = new Image();
      imageObj17.src = 'img/flow.png';


    stage.on("dragstart", function(e){
        e.target.moveTo(tempLayer);
        layer.draw();
    });

    var imageObj18 = new Image();
    imageObj18.src = 'img/chess.png';


    stage.on("dragstart", function(e){
        e.target.moveTo(tempLayer);
        layer.draw();
    });

    var imageObj19 = new Image();
    imageObj19.src = 'img/sept.png';


    stage.on("dragstart", function(e){
        e.target.moveTo(tempLayer);
        layer.draw();
    });

    var imageObj20 = new Image();
    imageObj20.src = 'img/mur.png';


    stage.on("dragstart", function(e){
        e.target.moveTo(tempLayer);
        layer.draw();
    });

    var previousShape;
    stage.on("dragmove", function(evt){
        var pos = stage.getPointerPosition();
        var shape = layer.getIntersection(pos);
        if (previousShape && shape) {
            if (previousShape !== shape) {
                // leave from old targer
                previousShape.fire('dragleave', {
                    type : 'dragleave',
                    target : previousShape,
                    evt : evt.evt
                }, true);
            } else {
                previousShape.fire('dragover', {
                    type : 'dragover',
                    target : previousShape,
                    evt : evt.evt
                }, true);
            }
        } else if (!previousShape && shape) {
            previousShape = shape;
            shape.fire('dragenter', {
                type : 'dragenter',
                target : shape,
                evt : evt.evt
            }, true);
        } else if (previousShape && !shape) {
            previousShape.fire('dragleave', {
                type : 'dragleave',
                target : previousShape,
                evt : evt.evt
            }, true);
            previousShape = undefined;
        }
    });
    stage.on("dragend", function(e){
        var pos = stage.getPointerPosition();
        var shape = layer.getIntersection(pos);

    if (shape) {

          // Print out and the ids of the shapes being interacted with
          var clickOnId = e.target.id;
          console.log('shape clicked on:', clickOnId);
          var intersectedWithId = shape.id;
          console.log('shape intersected with:', intersectedWithId);

          //If the shapes being interacted with are a combination of
          // 'line' and 'point', produce the shape nature
          if(clickOnId === 'line' && intersectedWithId === 'point'
            || clickOnId === 'point' && intersectedWithId === 'line'){
            var image4 = addDraggableImage(pos.x-40, pos.y-40, 80, 80);
            image4.image(imageObj4);
            layer.add(image4);
            layer.draw();
            image4.id = 'nature';
          }
          if(clickOnId === 'line' && intersectedWithId === 'face'
            || clickOnId === 'face' && intersectedWithId === 'line'){
            var image5 = addDraggableImage(pos.x-40, pos.y-40, 80, 80);
            image5.image(imageObj5);
            layer.add(image5);
            layer.draw();
            image5.id = 'deal'; 
          }
          if(clickOnId === 'point' && intersectedWithId === 'echo'
            || clickOnId === 'echo' && intersectedWithId === 'point'){
            var image7 = addDraggableImage(pos.x-40, pos.y-40, 60, 70);
            image7.image(imageObj7);
            layer.add(image7);
            layer.draw();
            image7.id = 'cloud'; 
          }
          if(clickOnId === 'nature' && intersectedWithId === 'deal'
            || clickOnId === 'deal' && intersectedWithId === 'nature'){
            var image8 = addDraggableImage(pos.x-40, pos.y-40, 80, 80);
            image8.image(imageObj8);
            layer.add(image8);
            layer.draw();
            image8.id = 'drama'; 
          }
          if(clickOnId === 'face' && intersectedWithId === 'point'
            || clickOnId === 'point' && intersectedWithId === 'face'){
            var image11 = addDraggableImage(pos.x-40, pos.y-40, 80, 80);
            image11.image(imageObj11);
            layer.add(image11);
            layer.draw();
            image11.id = 'cartoon'; 
          }
          if(clickOnId === 'round' && intersectedWithId === 'face'
            || clickOnId === 'face' && intersectedWithId === 'round'){
            var image12 = addDraggableImage(pos.x-40, pos.y-40, 100, 70);
            image12.image(imageObj12);
            layer.add(image12);
            layer.draw();
            image12.id = 'torto'; 
          }
          if(clickOnId === 'triangle' && intersectedWithId === 'echo'
            || clickOnId === 'echo' && intersectedWithId === 'triangle'){
            var image13 = addDraggableImage(pos.x-40, pos.y-40, 90, 90);
            image13.image(imageObj13);
            layer.add(image13);
            layer.draw();
            image13.id = 'surf'; 
          }
          if(clickOnId === 'nature' && intersectedWithId === 'cloud'
            || clickOnId === 'cloud' && intersectedWithId === 'nature'){
            var image14 = addDraggableImage(pos.x-40, pos.y-40, 80, 80);
            image14.image(imageObj14);
            layer.add(image14);
            layer.draw();
            image14.id = 'swing'; 
          }
          if(clickOnId === 'line' && intersectedWithId === 'surf'
            || clickOnId === 'surf' && intersectedWithId === 'line'){
            var image15 = addDraggableImage(pos.x-40, pos.y-40, 110, 60);
            image15.image(imageObj15);
            layer.add(image15);
            layer.draw();
            image15.id = 'wave'; 
          }
          if(clickOnId === 'diamond' && intersectedWithId === 'wave'
            || clickOnId === 'wave' && intersectedWithId === 'diamond'){
            var image17= addDraggableImage(pos.x-40, pos.y-40, 150, 100);
            image17.image(imageObj17);
            layer.add(image17);
            layer.draw();
            image17.id = 'flow'; 
          }
          if(clickOnId === 'line' && intersectedWithId === 'diamond'
            || clickOnId === 'diamond' && intersectedWithId === 'line'){
            var image19= addDraggableImage(pos.x-40, pos.y-40, 120, 150);
            image19.image(imageObj19);
            layer.add(image19);
            layer.draw();
            image19.id = 'sept'; 
          }
          if(clickOnId === 'point' && intersectedWithId === 'sept'
            || clickOnId === 'sept' && intersectedWithId === 'point'){
            var image18= addDraggableImage(pos.x-40, pos.y-40, 150, 130);
            image18.image(imageObj18);
            layer.add(image18);
            layer.draw();
            image18.id = 'chess'; 
          }
          if(clickOnId === 'drama' && intersectedWithId === 'surf'
            || clickOnId === 'surf' && intersectedWithId === 'drama'){
            var image20= addDraggableImage(pos.x-40, pos.y-40, 80, 80);
            image20.image(imageObj20);
            layer.add(image20);
            layer.draw();
            image20.id = 'mur'; 
          }
        }
        previousShape = undefined;
        e.target.moveTo(layer);
        layer.draw();
        tempLayer.draw();
    });

        function fitStageIntoParentContainer() {
            var container = document.querySelector('#stage-parent');
            // now we need to fit stage into parent
            var containerWidth = container.offsetWidth;
            // to do this we need to scale the stage
            var scale = containerWidth / stageWidth;
            stage.width(stageWidth * scale);
            stage.height(stageHeight * scale);
            stage.scale({ x: scale, y: scale });
            stage.draw();
        }
        fitStageIntoParentContainer();
        // adapt the stage on any window resize
        window.addEventListener('resize', fitStageIntoParentContainer);


      // use event delegation to update pointer style
      // and apply borders
      layer.on('mouseover', function(evt) {
          var shape = evt.target;
          document.body.style.cursor = 'pointer';
          layer.draw();
      });
</script>



<!-- <canvas id="leftbox" width="800" height="800">      
         <p>Your browserdoes not support the canvas element.</p>      
</canvas>    

</div> -->
</body>

</html>